<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel ="stylesheet" href="Get-Started.css">
</head>
<body>
    <div class="main">
        <div class="page1">
        <div class="navbar">
            <img src="images/dsw-logo.jpg" height="70rem" width="70rem" style="margin-bottom:0; border-radius: 50%; margin-left: 0;" >
         <div class="Right-Parts">
            <div class="Home" id="get-started-home">Home</div>
             <div class="About-us">About-Us
                <div class="about-us-box">
                    <p>This is the about us box</p>
                </div>
             </div>
             <div class="student-services">Student Services</div>
             <div class="contact-us">Contact-Us</div>
             <div class="our-placements">Our-Placement</div>
        </div>
    </div>
            <div class="middle-box">
                <div class="firstblock">
                    <div class="round-photo">
                    </div>
                    <button class="block-name" id="admin">Admin</button>
                </div>
                <div class="secondblock">
                    <div class="round-photo">
                    </div>
                    <button class="block-name" id="faculty">Faculty Members</button>
                </div>
                <div class="thirdblock">
                    <div class="round-photo">
                    </div>
                    <button class="block-name" id="club">Club Members</button>
                </div>

            </div>
    </div>
    <div class="page2" id="page2">
        <div class="page2-title">
            <h1>Signing in as Admin</h1></div>
        <div class="page2-middle-box">
            <div class="round-box"></div>
            <form id="loginForm">
                <label for="email" style="color: #fff;">Email:</label>
                <input type="email" id="email" name="email" required placeholder="Email">
                <br>
                <label for="password" style="color: #fff;">Password:</label>
                <input type="password" id="password" name="password" required placeholder="Password">
                <br>
                <button type="submit" class="page2-loginButton">Login</button>
            </form>
            <div id="message"></div>
        </div>
    </div>
    <div class="page3" id="page3">
        <div class="page3-title">
            <h1>Signing in as Faculty</h1>
        </div>
    </div>
    <div class="page4" id="page4">
        <div class="page4-title">
            <h1>Signing in as Members</h1>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script >

    
document.getElementById("admin").addEventListener("click", () => {
  document.getElementById("page2").scrollIntoView({behavior: "smooth"});
});


document.getElementById("faculty").addEventListener("click", () => {
  document.getElementById("page3").scrollIntoView({behavior: "smooth"});
});
    

document.getElementById("club").addEventListener("click", () => {
  document.getElementById("page4").scrollIntoView({behavior: "smooth"});
});

document.getElementById("get-started-home").addEventListener("click", () => {
    window.location.href="index.html";
});



// login/register script
            document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                const response = await axios.post('http://localhost:3000/api/auth/login', {
                    email: email,
                    password: password
                });

                // Assuming the response contains the token
                const token = response.data.token;

                // Store the token in localStorage (or sessionStorage)
                localStorage.setItem('authToken', token);

                // Decode the token to check the user's role
                const payload = JSON.parse(atob(token.split('.')[1]));
                if (payload.user.role === 'admin') {
                    window.location.href = "admin-dashboard.html";
                    // Redirect to admin dashboard or show admin content
                    document.getElementById('message').innerText = 'Welcome, Admin!';
                } else {
                    document.getElementById('message').innerText = 'Access denied. You are not an admin.';
                }
            } catch (error) {
                console.error('Error logging in', error);
                document.getElementById('message').innerText = 'Login failed. Please check your credentials.';
            }
            
        });

</script>
</body>
</html>